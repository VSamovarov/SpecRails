# üß© **SpecRails SDK Overview & Extension API**

## üéØ –¶–µ–ª—å

> –û–±–µ—Å–ø–µ—á–∏—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ SpecRails –µ–¥–∏–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, –∫–ª–∞—Å—Å–æ–≤ –∏ —Ö—É–∫–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç, –º–æ–¥—É–ª–µ–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π, —Å–æ—Ö—Ä–∞–Ω—è—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã.

SpecRails SDK —Å–ª—É–∂–∏—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–º –∫–∞—Ä–∫–∞—Å–æ–º, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–º —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —è–¥—Ä–æ–º, AI Runtime, –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º–∏ —Å–ª–æ—è–º–∏ –∏ –≤–Ω–µ—à–Ω–∏–º–∏ –ø–ª–∞–≥–∏–Ω–∞–º–∏. –û–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø—ã –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç–∏ –∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

---

## üß± 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ SDK

```
/specrails-sdk/
  ‚îú‚îÄ‚îÄ core/
  ‚îÇ   ‚îú‚îÄ‚îÄ context.js
  ‚îÇ   ‚îú‚îÄ‚îÄ prompt.js
  ‚îÇ   ‚îú‚îÄ‚îÄ runtime.js
  ‚îÇ   ‚îî‚îÄ‚îÄ validator.js
  ‚îú‚îÄ‚îÄ extensions/
  ‚îÇ   ‚îú‚îÄ‚îÄ registry.js
  ‚îÇ   ‚îú‚îÄ‚îÄ hooks.js
  ‚îÇ   ‚îî‚îÄ‚îÄ lifecycle.js
  ‚îú‚îÄ‚îÄ cli/
  ‚îÇ   ‚îú‚îÄ‚îÄ commands.js
  ‚îÇ   ‚îî‚îÄ‚îÄ telemetry.js
  ‚îî‚îÄ‚îÄ ui/
      ‚îú‚îÄ‚îÄ preview.js
      ‚îú‚îÄ‚îÄ adapter.js
      ‚îî‚îÄ‚îÄ components/
```

---

## ‚öôÔ∏è 2. –û—Å–Ω–æ–≤–Ω—ã–µ API-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ú–æ–¥—É–ª—å           | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                 |
| ---------------- | ---------------------------------------------------------- |
| **PromptAPI**    | –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ AI-–∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ |
| **ContextAPI**   | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ—è–º–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (user, domain, project)        |
| **RuntimeAPI**   | –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ AI-–∫–æ–º–∞–Ω–¥ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —É—Ç–∏–ª–∏—Ç                  |
| **ValidatorAPI** | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è DSL-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤                       |
| **ExtensionAPI** | –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤, —É—Ç–∏–ª–∏—Ç –∏ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤                      |
| **CLI API**      | –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Å–æ–ª—å—é, CI/CD –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π                  |
| **PreviewAPI**   | –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ UI-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ —Ñ–æ—Ä–º                            |

---

## üß© 3. PromptAPI

```js
import { PromptAPI } from '@specrails/sdk/core/prompt'

const response = await PromptAPI.execute({
  contract: 'form.contract.v2',
  context: { domain: 'education' },
  input: 'Generate a student registration form'
})

console.log(response.dsl)
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Prompt Contracts –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º—ã.
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ fallback –∏ recovery —Å—Ç—Ä–∞—Ç–µ–≥–∏–π.

---

## üß† 4. ContextAPI

```js
import { ContextAPI } from '@specrails/sdk/core/context'

ContextAPI.load('project', './context/project.yaml')
ContextAPI.merge({ user: { name: 'Viktor', role: 'analyst' } })
const context = ContextAPI.compose()
```

**–§—É–Ω–∫—Ü–∏–∏:**

* –†–∞–±–æ—Ç–∞ —Å –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º.
* –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ.
* –ò–∑–æ–ª—è—Ü–∏—è –∏ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è —Å–ª–æ—ë–≤.

---

## ‚öôÔ∏è 5. RuntimeAPI

```js
import { RuntimeAPI } from '@specrails/sdk/core/runtime'

await RuntimeAPI.run({
  utility: 'form.builder',
  input: { description: 'Student enrollment form' },
  mode: 'interactive'
})
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è.
* –†–∞–±–æ—Ç–∞ –≤ CLI, IDE –∏–ª–∏ web-runtime.
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤.

---

## üßæ 6. ValidatorAPI

```js
import { ValidatorAPI } from '@specrails/sdk/core/validator'

ValidatorAPI.validate(dsl, 'schemas/form.dsl.schema.json')
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JSON Schema / YAML DSL.
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –æ—à–∏–±–æ–∫ (`auto_fix`).
* –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤ –æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è—Ö.

---

## üß© 7. ExtensionAPI

```js
import { registerExtension } from '@specrails/sdk/extensions/registry'

registerExtension({
  name: 'custom-field-types',
  type: 'form-plugin',
  setup(core) {
    core.on('form:render:after', (ctx) => {
      ctx.addFieldType('color-picker')
    })
  }
})
```

**–¢–∏–ø—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π:**

* `form-plugin` ‚Äî –Ω–æ–≤—ã–µ UI-—ç–ª–µ–º–µ–Ω—Ç—ã.
* `validator` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ DSL.
* `runtime-hook` ‚Äî –ø–µ—Ä–µ—Ö–≤–∞—Ç —Å–æ–±—ã—Ç–∏–π –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è.
* `cli-plugin` ‚Äî –∫–æ–º–∞–Ω–¥—ã CLI.

---

## üß© 8. CLI API

```bash
specrails generate --utility form.builder --input user-story.txt --output ./specs/
```

**CLI-–∫–æ–º–∞–Ω–¥—ã:**

* `generate` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π.
* `validate` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ DSL –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤.
* `report` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–≤ drift/stability.
* `telemetry` ‚Äî —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∏ –ª–æ–≥–æ–≤.

---

## üß† 9. PreviewAPI

```js
import { PreviewAPI } from '@specrails/sdk/ui/preview'

PreviewAPI.render('form.dsl', './specs/form.student.v1.yaml')
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Vue/HTML –∞–¥–∞–ø—Ç–µ—Ä—ã.
* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ preview-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.
* –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ WebView IDE –∏–ª–∏ standalone-—Ä–µ–∂–∏–º–µ.

---

## üß© 10. Extension Lifecycle Hooks

| –•—É–∫              | –û–ø–∏—Å–∞–Ω–∏–µ                      |
| ---------------- | ----------------------------- |
| `onInit`         | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è      |
| `onContextLoad`  | –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞    |
| `onPromptBefore` | –ü–µ—Ä–µ—Ö–≤–∞—Ç –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º AI     |
| `onPromptAfter`  | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ AI       |
| `onValidate`     | –ü—Ä–æ–≤–µ—Ä–∫–∞ DSL –∏ –ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∞ |
| `onPreview`      | –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏     |

–ü—Ä–∏–º–µ—Ä:

```js
export function onPromptAfter(result, ctx) {
  if (ctx.utility === 'form.builder' && result.dsl.fields.length === 0) {
    console.warn('Empty form generated')
  }
}
```

---

## üß© 11. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ SDK (Custom Modules)

SpecRails –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–º–µ—Ö–∞–Ω–∏–∑–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π SDK** —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–ª–∞–≥–∏–Ω–æ–≤:

```js
import { registerSDKModule } from '@specrails/sdk/extensions/lifecycle'

registerSDKModule('analytics', {
  init(core) {
    core.hook('onPromptAfter', (res) => console.log('Telemetry:', res.duration_ms))
  }
})
```

---

## üìä 12. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ SDK

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç         | –°—Ç—Ä–∞—Ç–µ–≥–∏—è                                                |
| ----------------- | -------------------------------------------------------- |
| **Core API**      | –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ (semver, –º–∞–∂–æ—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Üí –Ω–æ–≤–∞—è –≤–µ—Ç–∫–∞) |
| **Contracts API** | –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Å—Ö–µ–º–∞–º (`contract.v2`, `contract.v3`) |
| **CLI / UI API**  | –ü–ª–∞–≤–∞—é—â–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å backward-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é           |

---

## üß≠ 13. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø—Ä–∏–Ω—Ü–∏–ø

> **SDK SpecRails ‚Äî —ç—Ç–æ –Ω–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –∞ —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤.**
> –ö–∞–∂–¥—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ –ø–ª–∞–≥–∏–Ω—ã, –Ω–µ –Ω–∞—Ä—É—à–∞—è –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—É—é —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.
> –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ ‚Äî *AI —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –∞ –Ω–µ –Ω–∞–ø—Ä—è–º—É—é*.
