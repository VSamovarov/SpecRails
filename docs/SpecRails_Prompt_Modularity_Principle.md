# üß© **SpecRails Prompt Modularity Principle**

## üéØ –¶–µ–ª—å

> –û–±–µ—Å–ø–µ—á–∏—Ç—å –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å, –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ—Å—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è–µ–º–æ—Å—Ç—å Prompt Contracts –≤ —Å–∏—Å—Ç–µ–º–µ SpecRails.
> –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–º –º–æ–¥—É–ª–µ–º –ø–æ–≤–µ–¥–µ–Ω–∏—è AI, —Å —á—ë—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –≤–µ—Ä—Å–∏—è–º–∏.

---

## ‚öôÔ∏è 1. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏

| –ü—Ä–∏–Ω—Ü–∏–ø                   | –°–º—ã—Å–ª                                                                               | –ê–Ω–∞–ª–æ–≥ –≤ –∫–æ–¥–µ        |
| ------------------------- | ----------------------------------------------------------------------------------- | -------------------- |
| **Single Responsibility** | –ö–æ–Ω—Ç—Ä–∞–∫—Ç —Ä–µ—à–∞–µ—Ç –æ–¥–Ω—É –∑–∞–¥–∞—á—É: —Ñ–æ—Ä–º–∞, –º–æ–¥–µ–ª—å, ACL –∏ —Ç.–¥.                              | –ö–ª–∞—Å—Å / –º–æ–¥—É–ª—å       |
| **Explicit Interface**    | –í—Ö–æ–¥—ã –∏ –≤—ã—Ö–æ–¥—ã –∑–∞–¥–∞–Ω—ã —è–≤–Ω–æ (`input`, `output`, `context`)                           | API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å        |
| **Loose Coupling**        | –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å–≤—è–∑–∞–Ω—ã —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã, –∞ –Ω–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã       | Dependency Injection |
| **Composable Design**     | –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –≤ —Ü–µ–ø–æ—á–∫–∏ (form ‚Üí model ‚Üí ACL)                           | Pipeline             |
| **Version Isolation**     | –ù–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ –Ω–µ –ª–æ–º–∞—é—Ç —Å—Ç–∞—Ä—ã–µ; —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ schema references | Semantic Versioning  |

---

## üß± 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—å–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

```mermaid
graph TD
A[Prompt Contract Registry] --> B[Base Contract]
B --> C[Model Contract]
B --> D[Form Contract]
C --> E[ACL Contract]
D --> F[UI Contract]
C --> G[FSM Contract]
```

* –í—Å–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ **Prompt Contract Registry**.
* –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –º–æ–∂–µ—Ç **–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å (extends)** –±–∞–∑–æ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã, **–∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å (imports)** –¥—Ä—É–≥–∏–µ –∏ **–∫–æ–º–ø–æ–∑–∏—Ä–æ–≤–∞—Ç—å (compose)** —Ü–µ–ø–æ—á–∫–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è.

---

## üß© 3. –ü—Ä–∏–º–µ—Ä –º–æ–¥—É–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

```yaml
# form.generator.yaml
extends: "base.prompt.contract"
imports:
  - "model.contract.v1"
  - "acl.contract.v1"
context:
  entity: "student_profile"
input:
  description: "Create a user-facing form based on model and ACL rules"
output:
  format: "yaml"
  schema: "spec.form.v1.json"
```

–ö–æ–Ω—Ç—Ä–∞–∫—Ç **–Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –ª–æ–≥–∏–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã** ‚Äî –æ–Ω –ª–∏—à—å –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É.

---

## ‚öôÔ∏è 4. –ú–µ—Ö–∞–Ω–∏–∑–º—ã –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏

| –ú–µ—Ö–∞–Ω–∏–∑–º                | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                               | –ê–Ω–∞–ª–æ–≥                 |
| ----------------------- | -------------------------------------------------------- | ---------------------- |
| **extends**             | –ù–∞—Å–ª–µ–¥—É–µ—Ç –æ–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–º—Ç–∞               | –∫–ª–∞—Å—Å–æ–≤–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ |
| **imports**             | –ü–æ–¥–∫–ª—é—á–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã (–º–æ–¥–µ–ª—å, ACL, FSM)          | include / import       |
| **compose**             | –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤ –µ–¥–∏–Ω—ã–π pipeline        | middleware             |
| **override**            | –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —á–∞—Å—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏—è –∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞             | override method        |
| **context inheritance** | –î–µ–ª–∞–µ—Ç –æ–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—è–∑—ã–∫, —Å—Ö–µ–º–∞) –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –ø–æ—Ç–æ–º–∫–∞–º | DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä           |

---

## üß† 5. –ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏

```yaml
compose:
  - use: "model.contract.v1"
  - use: "acl.contract.v1"
  - use: "fsm.contract.v1"
steps:
  - task: "generate model"
  - task: "generate acl"
  - task: "generate fsm"
  - task: "generate form using results of previous steps"
```

–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ **pipeline** ‚Äî AI –ø—Ä–æ—Ö–æ–¥–∏—Ç —à–∞–≥–∏ –ø–æ–æ—á–µ—Ä—ë–¥–Ω–æ, –∞ SpecRails Core –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å—Ö–µ–º.

---

## üß© 6. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏

1. –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏–º–µ–µ—Ç **—É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏ –≤–µ—Ä—Å–∏—é**.
2. –°–≤—è–∑–∏ –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ **registry**, –±–µ–∑ –ø—Ä—è–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
3. –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç **input/output** —è–≤–Ω–æ –∏ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ.
4. –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ AI ‚Äî —Ç–æ–ª—å–∫–æ –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ SpecRails.
5. –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç **–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è —è–¥—Ä–æ–º** (—á–µ—Ä–µ–∑ JSON Schema).

---

## üß≠ 7. –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å

* üîÅ **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ—Å—Ç—å** ‚Äî –æ–¥–∏–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.
* ‚öôÔ∏è **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** ‚Äî –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π.
* üß© **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ª–æ–º–∞—é—Ç —Å–∏—Å—Ç–µ–º—É.
* üìä **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** ‚Äî –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –æ—Ç–¥–µ–ª—å–Ω–æ.
* üß† **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ Prompt SDK.

---

## üí° 8. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø—Ä–∏–Ω—Ü–∏–ø

> **Prompt Contract = –º–æ–¥—É–ª—å –ø–æ–≤–µ–¥–µ–Ω–∏—è AI.**
> –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É —É—Å—Ç–æ–π—á–∏–≤–æ–π, —É–ø—Ä–∞–≤–ª—è–µ–º–æ–π –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–π.
> –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –º–µ–ª–∫–æ–∑–µ—Ä–Ω–∏—Å—Ç—ã–º–∏, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É–µ–º—ã–º–∏ –∏ –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã–º–∏ ‚Äî –∫–∞–∫ –ø–∞–∫–µ—Ç—ã –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ NPM –∏–ª–∏ –∫–ª–∞—Å—Å—ã –≤ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ.
