# üîÅ **SpecRails Validation Loop Principle**

## üéØ –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è

> SpecRails –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–¥–≤—É—Ö–∫–æ–Ω—Ç—É—Ä–Ω—É—é –º–æ–¥–µ–ª—å –≤–∞–ª–∏–¥–∞—Ü–∏–∏**: –º–∞—à–∏–Ω–Ω—É—é –∏ —á–µ–ª–æ–≤–µ—á–µ—Å–∫—É—é.
> AI –∞–≥–µ–Ω—Ç —Å–æ–∑–¥–∞—ë—Ç —á–µ—Ä–Ω–æ–≤–æ–π DSL, SpecRails Core —Ñ–æ—Ä–º–∞–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ–≥–æ, –∞ –∞–Ω–∞–ª–∏—Ç–∏–∫ –≤–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–º—ã—Å–ª –∏ –ª–æ–≥–∏–∫—É.
> –í–º–µ—Å—Ç–µ –æ–Ω–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç –∏—Ç–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ü–∏–∫–ª *¬´AI ‚áÑ Core ‚áÑ Analyst¬ª*, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏ –∫–∞—á–µ—Å—Ç–≤–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π.

---

## ‚öôÔ∏è 1. Machine Validation (Core Loop)

**–ó–∞–¥–∞—á–∞:** –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –±–µ–∑ —É—á–∞—Å—Ç–∏—è —á–µ–ª–æ–≤–µ–∫–∞.

### –í–∫–ª—é—á–∞–µ—Ç:

* **–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É** (–≤–∞–ª–∏–¥–Ω—ã–π YAML/JSON);
* **–ü—Ä–æ–≤–µ—Ä–∫—É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** –ø–æ JSON Schema;
* **–ü—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤ –∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `type: date` –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å `min` –∏ `max`);
* **–°–±–æ—Ä–∫—É —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö —Ñ–æ—Ä–º** (`include`, `component`, `use`);
* **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é** (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö, —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ—Å—Ç–µ–π);
* **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π feedback** AI –∞–≥–µ–Ω—Ç—É –æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö.

### –ü—Ä–∏–º–µ—Ä:

AI —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª DSL, —è–¥—Ä–æ –æ—Ç–≤–µ—Ç–∏–ª–æ:

```json
{
  "errors": [
    {"field": "email", "issue": "missing required attribute 'required'"},
    {"field": "birthDate", "issue": "invalid type: must be 'date'"}
  ],
  "valid": false
}
```

AI –∞–≥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç—á—ë—Ç, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ–º—Ç –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç DSL.

---

## üëÅÔ∏è 2. Human Validation (Interactive Visual Loop)

**–ó–∞–¥–∞—á–∞:** –∞–Ω–∞–ª–∏—Ç–∏–∫ –≤–∏–∑—É–∞–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–º—ã—Å–ª –∏ UX-–ª–æ–≥–∏—á–µ—Å–∫—É—é –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º—ã.

### –ü—Ä–æ—Ü–µ—Å—Å:

1. SpecRails Core –ø–µ—Ä–µ–¥–∞—ë—Ç –≤–∞–ª–∏–¥–Ω—ã–π DSL –≤ **Renderer**.
2. –ê–Ω–∞–ª–∏—Ç–∏–∫ –≤–∏–¥–∏—Ç —Ñ–æ—Ä–º—É –≤ preview.
3. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º:

   * –¥–∞—ë—Ç –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫—É AI –∞–≥–µ–Ω—Ç—É –≤ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ;
   * –ª–∏–±–æ –≤—Ä—É—á–Ω—É—é –ø—Ä–∞–≤–∏—Ç DSL.
4. –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —Å–Ω–æ–≤–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç **Core Validation Loop**.

### –ü—Ä–∏–º–µ—Ä –¥–∏–∞–ª–æ–≥–∞:

> –ê–Ω–∞–ª–∏—Ç–∏–∫: ¬´–ü–æ–ª–µ *–¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è* –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º, –∏ –µ–≥–æ –ª—É—á—à–µ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –Ω–∞–¥ email.¬ª
> AI: –æ–±–Ω–æ–≤–ª—è–µ—Ç DSL ‚Üí Core –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç ‚Üí Renderer –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç.

---

## üîÅ 3. –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π —Ü–∏–∫–ª

```mermaid
sequenceDiagram
    participant Analyst
    participant AI_Agent
    participant Core
    participant Renderer

    Analyst->>AI_Agent: User Story / Feedback
    AI_Agent->>Core: Draft DSL
    Core-->>AI_Agent: Validation Report
    Core->>Renderer: Render Form Preview
    Renderer-->>Analyst: Display Form
    Analyst->>AI_Agent: Corrections / Suggestions
    AI_Agent->>Core: Updated DSL
    Core-->>Renderer: Re-render
    Renderer-->>Analyst: Updated Preview
```

---

## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

| –ü—Ä–∏–Ω—Ü–∏–ø                                | –°–º—ã—Å–ª                                                               |
| -------------------------------------- | ------------------------------------------------------------------- |
| **AI ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–º—ã—Å–ª–∞**              | –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫ –≤ —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π DSL.                |
| **Core ‚Äî –∞—Ä–±–∏—Ç—Ä —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–π –∏—Å—Ç–∏–Ω—ã**    | –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—É—é –∏ –ª–æ–≥–∏—á–µ—Å–∫—É—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å.                  |
| **–ê–Ω–∞–ª–∏—Ç–∏–∫ ‚Äî –∞—Ä–±–∏—Ç—Ä —Å–º—ã—Å–ª–æ–≤–æ–π –∏—Å—Ç–∏–Ω—ã** | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ —Ñ–æ—Ä–º–∞ –æ—Ç—Ä–∞–∂–∞–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.                     |
| **–í–∞–ª–∏–¥–∞—Ü–∏—è ‚Äî –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–∞**             | –û—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –ª–∏–±–æ AI, –ª–∏–±–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏. |

---

## üîí –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä            | –ß—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç                                                         |
| ------------------- | ------------------------------------------------------------------------ |
| **Consistency**     | –õ—é–±–æ–π AI –∏–ª–∏ —á–µ–ª–æ–≤–µ–∫, –ø—Ä–∏ —Ç–µ—Ö –∂–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—É—á–∏—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π DSL. |
| **Transparency**    | –ê–Ω–∞–ª–∏—Ç–∏–∫ –≤–∏–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å, –∞ –Ω–µ ¬´—á—ë—Ä–Ω—ã–π —è—â–∏–∫¬ª.                              |
| **Quality Control** | –û—à–∏–±–∫–∏ –ª–æ–≤—è—Ç—Å—è –¥–æ —ç—Ç–∞–ø–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.                                      |
| **Learning Loop**   | AI —É–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª–æ–≥–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏.                  |

---

## üß≠ –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥

> **AI —Å–æ–∑–¥–∞—ë—Ç. Core –ø—Ä–æ–≤–µ—Ä—è–µ—Ç. –ê–Ω–∞–ª–∏—Ç–∏–∫ —É—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç.**
> –¢–æ–ª—å–∫–æ —Å–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —ç—Ç–∏—Ö —Ç—Ä—ë—Ö —Ä–æ–ª–µ–π –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –≤ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—É—é –∏–Ω–∂–µ–Ω–µ—Ä–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é.
