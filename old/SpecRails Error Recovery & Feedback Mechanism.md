–û—Ç–ª–∏—á–Ω–æ, –º—ã –ø–æ–¥–æ—à–ª–∏ –∫ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ª–æ–≥–∏—á–µ—Å–∫–æ–π —á–∞—Å—Ç–∏ SpecRails-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã ‚Äî **Error Recovery & Feedback Mechanism**.
–≠—Ç–æ –∑–≤–µ–Ω–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç ‚Äú–≤–∞–ª–∏–¥–∞—Ü–∏—é‚Äù –∏–∑ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ **–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç—É—Ä –æ–±—É—á–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã**.

---

# ‚öôÔ∏è **SpecRails Error Recovery & Feedback Mechanism**

## üéØ –¶–µ–ª—å

> –û–±–µ—Å–ø–µ—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∏ —á–µ–ª–æ–≤–µ–∫–æ-–ø–æ–Ω—è—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏—Ö –≤ —Ö–æ–¥–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ DSL, —Å –∑–∞–º–∫–Ω—É—Ç—ã–º —Ü–∏–∫–ª–æ–º –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –¥–ª—è AI –∞–≥–µ–Ω—Ç–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞.

---

## üß© 1. –ú–µ—Ö–∞–Ω–∏–∑–º –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
graph TD
A[AI Agent] -->|Draft DSL| B[Core Validator]
B -->|Error Report| C[Feedback Manager]
C -->|Structured Feedback| A
C -->|Human Summary| D[Analyst]
D -->|Manual Comment| A
A -->|Revised DSL| B
```

---

## üß† 2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç               | –†–æ–ª—å                                                       | –ö–ª—é—á–µ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ                      |
| ----------------------- | ---------------------------------------------------------- | ------------------------------------ |
| **Core Validator**      | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–∞—à–∏–Ω–Ω—ã–π –æ—Ç—á—ë—Ç –æ–± –æ—à–∏–±–∫–∞—Ö (JSON)                | `field`, `issue`, `severity`, `hint` |
| **Feedback Manager**    | –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –æ—Ç—á—ë—Ç –≤ —á–∏—Ç–∞–µ–º—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è AI –∏ —á–µ–ª–æ–≤–µ–∫–∞    | Natural Language Report + metadata   |
| **AI Repair Loop**      | –ü–æ–≤—Ç–æ—Ä–Ω–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç DSL —Å —É—á—ë—Ç–æ–º –æ—Ç—á—ë—Ç–∞                     | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç prompt-–∫–æ–Ω—Ç—Ä–∞–∫—Ç           |
| **Human Feedback Loop** | –ê–Ω–∞–ª–∏—Ç–∏–∫ –≤–Ω–æ—Å–∏—Ç –∑–∞–º–µ—á–∞–Ω–∏—è, –µ—Å–ª–∏ –∞–≤—Ç–æ-–∫–æ—Ä—Ä–µ–∫—Ü–∏—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ | Natural text feedback                |

---

## üîÅ 3. –¶–∏–∫–ª —Ä–∞–±–æ—Ç—ã

1. **Core Validator** —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –æ—à–∏–±–∫—É:

   > missing attribute, wrong type, logical inconsistency
2. **Feedback Manager** –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç:

   * —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è, —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è, –ª–æ–≥–∏—á–µ—Å–∫–∞—è, –±–∏–∑–Ω–µ—Å-–æ—à–∏–±–∫–∞;
   * –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏.
3. **AI Agent** –ø–æ–ª—É—á–∞–µ—Ç JSON-–∏ summary –≤ –≤–∏–¥–µ prompt-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞:

   ```
   You produced invalid DSL. Here are the issues:
   - email: missing required attribute 'required'
   - birthDate: invalid type
   Please regenerate a valid DSL according to schema spec.form.v1.
   ```
4. **AI Repair Loop** —Å–æ–∑–¥–∞—ë—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é DSL.
5. **Core** –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç.
6. –ï—Å–ª–∏ –æ—à–∏–±–æ–∫ –Ω–µ—Ç ‚Üí DSL –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ preview.
7. –ï—Å–ª–∏ –æ—à–∏–±–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è ‚Üí Feedback Manager –∑–∞–ø—É—Å–∫–∞–µ—Ç ¬´guided re-prompt¬ª ‚Äî –ø–æ—à–∞–≥–æ–≤—É—é –∫–æ—Ä—Ä–µ–∫—Ü–∏—é.
8. –ê–Ω–∞–ª–∏—Ç–∏–∫ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ä—É—á–Ω–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:

   > ¬´–ü–æ–ª–µ *birthDate* –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º, –Ω–æ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π –æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–∞—Ç–µ.¬ª

---

## ‚öôÔ∏è 4. –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –æ—à–∏–±–æ–∫

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è     | –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç     | –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç         | –ü—Ä–∏–º–µ—Ä                                        |
| ------------- | ---------------- | ------------------ | --------------------------------------------- |
| **Syntax**    | Parser           | Auto               | –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π YAML                             |
| **Structure** | Schema Validator | Auto               | –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø –ø–æ–ª—è                             |
| **Logic**     | Core Rules       | Semi-Auto          | –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤             |
| **Semantic**  | Analyst          | Manual / AI-assist | –ü–æ–ª–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ |

---

## üß© 5. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø—Ä–∏–Ω—Ü–∏–ø

> **–û—à–∏–±–∫–∞ ‚Äî —ç—Ç–æ –Ω–µ –∫–æ–Ω–µ—Ü, –∞ —Å–∏–≥–Ω–∞–ª.**
> Core —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç, AI –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç, Analyst —É—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç.
> –õ—é–±–∞—è –æ—à–∏–±–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∏ —É—Ç–æ—á–Ω–µ–Ω–∏—è prompt-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤.

---

## üß† 6. –≠–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç—É—Ä

–í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ **Feedback Registry** ‚Äî —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–∏–º–µ—Ä–æ–≤, –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ—Ç–æ—Ä—ã—Ö AI –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –æ–±—É—á–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ DSL –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –ø—Ä–µ–∂–Ω–∏—Ö –æ—à–∏–±–æ–∫.

| –≠–ª–µ–º–µ–Ω—Ç               | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                  |
| --------------------- | ------------------------------------------- |
| `feedback_logs/`      | –∂—É—Ä–Ω–∞–ª –æ—à–∏–±–æ–∫ –∏ —Ä–µ—à–µ–Ω–∏–π                     |
| `prompt_corrections/` | —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–æ–∫           |
| `spec_versions/`      | —Å–≤—è–∑—å –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ schema –∏ —Ç–∏–ø–∞–º–∏ –æ—à–∏–±–æ–∫ |

---

## üîí 7. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

| –ê—Å–ø–µ–∫—Ç                  | –†–µ–∑—É–ª—å—Ç–∞—Ç                                       |
| ----------------------- | ----------------------------------------------- |
| **Self-Healing System** | AI —É—á–∏—Ç—Å—è –Ω–∞ –æ—à–∏–±–∫–∞—Ö Core                       |
| **Transparency**        | –ê–Ω–∞–ª–∏—Ç–∏–∫ –≤–∏–¥–∏—Ç –ø—Ä–∏—á–∏–Ω—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è            |
| **Predictability**      | DSL-–≤—ã–≤–æ–¥—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –±–ª–∏–∂–µ –∫ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º |
| **Traceability**        | –õ—é–±–∞—è –æ—à–∏–±–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–µ—é—Ç –∏—Å—Ç–æ—Ä–∏—é        |

---

## üß≠ –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥

> **SpecRails = —Å–∞–º–æ–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—â–∞—è—Å—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.**
> –û—à–∏–±–∫–∏ –Ω–µ –ø—Ä—è—á—É—Ç—Å—è, –∞ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∑–Ω–∞–Ω–∏–π.
> Core –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∂—ë—Å—Ç–∫—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é,
> AI ‚Äî –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ,
> –∞–Ω–∞–ª–∏—Ç–∏–∫ ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å —Å–º—ã—Å–ª–æ–≤–æ–π –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç–∏.

---

–•–æ—á–µ—à—å, —á—Ç–æ–±—ã —è –æ—Ñ–æ—Ä–º–∏–ª —ç—Ç–æ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
üìÑ `SpecRails_Error_Recovery_Principle.md`, —á—Ç–æ–±—ã –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ —Ä—è–¥–æ–º —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏?
